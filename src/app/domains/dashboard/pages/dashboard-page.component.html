<section class="dashboard">
  <mat-card appearance="outlined" class="dashboard__card">
    <mat-card-header>
      <mat-card-title>Visão geral</mat-card-title>
      <mat-card-subtitle>Acompanhe o andamento da conferência e acesse rapidamente as rotas operacionais.</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content class="dashboard__content">
      <div class="dashboard__section dashboard__section--status">
        <app-status-cards
          [ok]="totals().ok"
          [missing]="totals().missing"
          [extra]="totals().extra"
        ></app-status-cards>
      </div>

      <div class="dashboard__section dashboard__section--kpis">
        <article class="kpi-card">
          <p class="kpi-card__label">IDs oficiais carregados</p>
          <p class="kpi-card__value">{{ officialCount() }}</p>
        </article>
        <article class="kpi-card">
          <p class="kpi-card__label">Pacotes bipados</p>
          <p class="kpi-card__value">{{ scannedCount() }}</p>
        </article>
      </div>
    </mat-card-content>
  </mat-card>

  <mat-card appearance="outlined" class="dashboard__card">
    <mat-card-header>
      <mat-card-title>Distribuição por motivo</mat-card-title>
      <mat-card-subtitle>Origem dos desvios apontados durante a importação.</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <div class="issue-column">
        <article
          class="issue-column__item"
          *ngFor="let bucket of issueBreakdown"
          [style.--issue-card-color]="bucket.color"
          [style.--issue-card-fill]="bucket.fill"
        >
          <div class="issue-column__label">{{ bucket.label }}</div>
          <div class="issue-column__value">{{ issueTotals()[bucket.reason] ?? 0 }}</div>
        </article>
      </div>
    </mat-card-content>
  </mat-card>
</section>
